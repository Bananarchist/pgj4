<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Main</title>
    <link rel="stylesheet" href="index.css">
    <script src="main.js"></script>
    <script src="websocket.js"></script>
    <script src="localstorage.js"></script>
  </head>
  <body>
    <main id="game">
      <p>You will need to enable JavaScript to play this game.</p>
    </main>
    <script>
      const mountElm = () => {
        const node = document.getElementById("game");
        const flags = { width: document.body.clientWidth, height: document.body.clientHeight };
        const app = Elm.Main.init({node, flags});
        initializeLocalStorage(app);
        app.ports.initializeWebSocket.subscribe(function(message) {
          s = JSON.parse(message);
          openSocket(app, s.host, s.port, s.username);
        });
      }
      const mountHost = (str) => {
        if (str != "" && str != undefined) {
          //set up networked game
        } else {
          //set up AI game
        }
	        //connect ports
      }
						
      mountElm();
    </script>
  </body>
</html>
